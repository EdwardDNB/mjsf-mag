# Vue плагіни — огляд

## Що таке плагін

- Плагіни — це самодостатній код, який додає функціональність до Vue‑додатку на рівні `app`.
- Щоб під’єднати плагін, використовують `.use()` на екземплярі `app`:

  ```js
  import { createApp } from 'vue'
  const app = createApp({})
  app.use(myPlugin, { /* опції */ })
  ```

- Плагін може бути:
    - Об’єктом з методом `install(app, options)`
    - Або безпосередньо функцією, яка слугує як функція встановлення (install)

- Параметри, що передаються у `app.use(...)`, передаються потім у `install` як `options`.

---

## Що може робити плагін

Немає жорстких обмежень, але найпоширеніші сценарії:

1. **Глобальна реєстрація компонентів або директив**  
   Через `app.component(...)` або `app.directive(...)`

2. **Надання ін’єкцій (provide/inject)**  
   Через `app.provide(...)` плагін може передати дані у компоненти, які пізніше отримають їх за допомогою `inject(...)`.

3. **Додавання властивостей або методів до глобального екземпляру**  
   Через `app.config.globalProperties` (це як “глобальні властивості” для всіх компонентів)

4. **Комбіновані функціональності**  
   Наприклад, бібліотека може одночасно реєструвати компоненти, надавати сервіси через `provide`, додавати глобальні методи тощо.

Багато офіційних бібліотек Vue реалізовано як плагіни, наприклад `vue-router`.

---

## Як написати свій плагін

### Приклад: простий i18n плагін

1. Створіть файл `plugins/i18n.js`, де буде ваш плагін:

   ```js
   export default {
     install: (app, options) => {
       // Додаємо глобальний метод $translate()
       app.config.globalProperties.$translate = (key) => {
         return key.split('.').reduce((o, i) => {
           if (o) return o[i]
         }, options)
       }
     }
   }
   ```

2. Додайте плагін у свій додаток:

   ```js
   import { createApp } from 'vue'
   import i18nPlugin from './plugins/i18n'

   const app = createApp(...)
   app.use(i18nPlugin, {
     greetings: {
       hello: 'Bonjour!'
     }
   })
   ```

3. У шаблонах можна використовувати:

   ```vue
   <h1>{{ $translate('greetings.hello') }}</h1>
   ```

   — і це поверне `'Bonjour!'` у наведеному прикладі.

> **Підказка:** застосовувати глобальні властивості слід обережно — якщо в додатку багато плагінів із своїми глобальними властивостями, це може заплутати код.

---

## Використання provide / inject у плагіні

- Плагін може використовувати `app.provide('ключ', значення)` для надання певних даних або об’єктів на рівні всього додатку.
- Компоненти або інші частини додатку можуть отримати ці дані через `inject('ключ')`.
- Наприклад:

  ```js
  // плагін
  export default {
    install(app, options) {
      app.provide('i18n', options)
      // також можна, наприклад, додати глобальний метод чи властивість
      app.config.globalProperties.$translate = (key) => {
        // реалізація...
      }
    }
  }
  ```

  У компоненті:

  ```js
  import { inject } from 'vue'
  const i18n = inject('i18n')
  console.log(i18n.greetings.hello)
  ```

  Або в опційній стилі:

  ```js
  export default {
    inject: ['i18n'],
    created() {
      console.log(this.i18n.greetings.hello)
    }
  }
  ```
